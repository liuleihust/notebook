### 组合计数

1. **从一副52张扑克牌中随机抽两种，颜色相等的概率**

   ​	$P=\frac{C_{4}^{1} C_{13}^{2}}{C_{52}^{2}}$

2. **54张牌，分成6份，每份9张牌，大小王在一起的概率**

   ​	$\frac{C_{52}^{7} C_{2}^{2}}{C_{54}^{9}}=4 / 159$

3. **52张牌去掉大小王，分成26*2两堆，从其中一堆取4张牌为4个a的概率**



4. 一枚硬币，扔了一亿次都是正面朝上，再扔一次反面朝上的概率是？

- 第一种，我们不知道二项分布的参数，那么就要进行极大似然估计，再计算条件概率，那么应该是大概率正面的（经岳子涵同学提醒。。。应该是1，竟然没一次扔到反面。。。）。因为参数theta很偏向正面。
- 第二种是依然假设是匀质的硬币，那么计算条件概率，得二分之一。

### 智力题

**100人坐飞机，第一个乘客在座位中随便选一个坐下，第100人正确坐到自己坐位的概率是？**

> 这100个人分别拿到了从1号到100号的座位，这些乘客会按号码顺序登机并对号入座，如果他们发现对应号座位被别人坐了，就会在剩下空的座位随便挑一个坐．现在假设1号乘客不记得自己的座位，他会在100个座位中随便选一个座位坐下，问：第100人正确坐到自己坐位的概率是多少？

[答案](https://www.zhihu.com/search?type=content&q=飞机座位中的疯子问题)



**三门问题**：

> 三个门中等概率地有一个门背后有奖，当你选择一个门之后，主持人会刻意打开一个没有将的门，选择换还不是换？

贝叶斯公式   $P(A | O)=\frac{P(O | A) P(A)}{P(O | A) P(A)+P(O | \overline{A}) P(\overline{A})}$

A 代表我们要评估的事件，比如三门问题当中 **当前选中的门背后有奖**，

O 表示我们观察到的新的条件，比如三门问题中的 **主持人打开了没有奖的门**

如果这里 ![[公式]](https://www.zhihu.com/equation?tex=P%28O%7CA%29%3DP%28O%7C%5Cbar+A%29%3D1) ，也就是说这个条件O不管A是否成立，都会发生，那么显然就有

![[å¬å¼]](https://www.zhihu.com/equation?tex=P%28A%7CO%29+%3D+%5Cfrac%7BP%28A%29%7D%7BP%28A%29+%2B+P%28%5Cbar+A%29%7D+%3D+P%28A%29)



也就是说条件**没有影响事件的后验概率**。进一步来说，只需要 ![[公式]](https://www.zhihu.com/equation?tex=P%28O%7CA%29%3DP%28O%7C%5Cbar+A%29) ，也就是说事件A是否发生与条件O是否发生相互独立，都可以得到**条件发生不影响事件的后验概率**。但是反过来，如果 ![[公式]](https://www.zhihu.com/equation?tex=P%28O%7CA%29+%5Cne+P%28O%7C%5Cbar+A%29) ，那么后验概率是会受到影响的，因为我们有理由相信，**如果A更有利于、或者更不利于O发生，那么在O发生/不发生的情况下，就暗示了A本身发生的可能性有变化，需要重新评估，这个重新评估的过程就叫做后验概率**。在这种情况下，O为我们提供了额外的信息，因此我们也对于事件是否发生有了更准确的评估。
故这里 P(A|O) =P(A)= 2/3



**三个酒鬼**：

> 某酒鬼有90%的日子都会出去喝酒，喝酒只随机去固定的三家酒吧。今天警察找了其中两家酒吧都没有找到酒鬼。 问：酒鬼在第三家酒吧的几率？

如果要和三门问题类似，那么题目应该是“警察在已经知道酒鬼所在位置的情况下，故意告诉我们，其中两个酒吧里没有酒鬼”，也就是说不管酒鬼在哪里，警察都会挑两个不在的酒吧告诉我们。这种情况下才能得到90%，可这显然不是题目的意思。题目的意思显然是警察在不知道酒鬼所在的情况下找了两家酒吧，如果是平时的话，应该已经有60%的可能性找到酒鬼了，但是实际上是没有找到，那么酒鬼根本没出来喝酒的可能性就大大增加了。套用后验概率的公式来计算，这里A是酒鬼在第三家酒吧，那么酒鬼在第三家酒吧的情况下条件发生的概率是100%，而酒鬼不在第三家酒吧的情况下，条件发生的概率只有1/7（只有酒鬼在家的情况下才出现），因此是会影响后验概率的。或者，将贝叶斯公式下面的部分改写成全部四类条件的求和：
![[å¬å¼]](https://www.zhihu.com/equation?tex=P%28A_3%7CO%29%3D%5Cfrac%7BP%28O%7CA_3%29P%28A_3%29%7D%7BP%28O%7CA_1%29P%28A_1%29%2BP%28O%7CA_2%29P%28A_2%29%2BP%28O%7CA_3%29P%28A_3%29%2BP%28O%7CA_0%29P%28A_0%29%7D)

其中A1、A2、A3分别表示酒鬼在三家酒吧相应的事件，A0表示酒鬼在家的事件。显然有 ![[公式]](https://www.zhihu.com/equation?tex=P%28O%7CA_3%29%3DP%28O%7CA_0%29%3D1) ， ![[公式]](https://www.zhihu.com/equation?tex=P%28O%7CA_1%29%3DP%28O%7CA_2%29%3D0) 。O的发生与A不独立，会影响后验概率，结果为

![[公式]](https://www.zhihu.com/equation?tex=P%28A_3%7CO%29%3D%5Cfrac%7BP%28A_3%29%7D%7BP%28A_3%29%2BP%28A_0%29%7D%3D%5Cfrac%7B0.3%7D%7B0.3%2B0.1%7D%3D0.75)

和我们最开始的结果是一样的。



**有8个箱子，现在有一封信，这封信放在这8个箱子中（任意一个）的概率为4/5,不放的概率为1/5（比如忘记了）,现在我打开1号箱子发现是空的，求下面7个箱子中含有这封信的概率为？**

7/9



**某个一直函数返回0/1，0的概率为p，写一函数返回两数概率相等**

思路：

1. 执行两次给的函数，第一次返回1，第二次返回0的概率为(1-p)p

2. 执行两次给的函数，第一次返回0，第二次返回1的概率为p(1-p)

3. 循环执行两次函数，如果一次返回0，一次返回1则返回0或1



**给你一个函数，这个函数是能得出1-5之间的随机数的，概率相同。现在求1-7之间随机函数，你如何做**



1. **简单的  先从 1-7 求 1-5** 

```java
intRand5(){
    intx=~(1<<31);// max int
    while(x>5)
        x=Rand7();
    returnx;
}
```

这个函数可以等概率地产生 1-5 个数，因为 Rand7()是等概率的，没有对任何一个数偏袒。如何证明：

我们只需要证明1到5的数的概率是不是1/5就可以了。比如说计算向下 Rand5生成1 的概率是多少，上面的函数中有个 while循环，只要没生成1到5 间的数就会一直执行下去，因此，我们要的1可能是第一次调用rand7时产生的，也可能是第二次.. 第n 次

生成1 的概率计算如下：

```java

P(x=1)=1/7+(2/7)*1/7+(2/7)^2*1/7+(2/7)^3*1/7+...
      =1/7*(1+2/7+(2/7)^2+...)// 等比数列
      =1/7*1/(1-2/7)
      =1/7*7/5
      =1/5
```

2. 我们用 Rand5 来实现Rand7,只要我们将Rand5 映射到一个能产生更大的随机数Rand 其中 a>7,就可以套用上面的模板了，但是要注意一点的是，你映射后的 Randa 一定是要满足等概率生成 1 到 a

比如 

**Rand5()+Rand5()-1**

上述代码可以生成1到9的数，但它们是等概率生成的吗？不是。生成1只有一种组合： 两个Rand5()都生成1时：(1, 1)；而生成2有两种：(1, 2)和(2, 1)；生成6更多。 它们的生成是不等概率的。那要怎样找到一个等概率生成数的组合呢？

我们先给出一个组合，再来进行分析。组合如下：

**5*(Rand5()-1)+Rand5()**

Rand5产生1到5的数，减1就产生0到4的数，乘以5后可以产生的数是：0,5,10,15,20。 再加上第二个Rand5()产生的1,2,3,4,5。我们可以得到1到25， 而且每个数都只由一种组合得到，即上述代码可以等概率地生成1到25。OK， 到这基本上也就解决了. 

但是 还有个问题， while 要循环很多次才能返回，因为Rand25 会产生 1 到 25的数，而只有 1 到7时才跳出while 循环，生成大部分的数都会舍弃，所有，我们让舍弃的数尽量少，于是我们可以修改 while 的判断条件，让x 与最接近25 且 小于 25的7的倍数。

```java

int Rand7(){
    int x = ~(1<<31); // max int
    while(x > 21)
        x = 5 * (Rand5() - 1) + Rand5() // Rand25
    return x%7 + 1;
}
```



**X是一个以p的概率产生1,1-p的概率产生0的随机变量，利用X等概率生成1-n的数**

现生成两次，生成 01 和 10 的概率是相同的，生成00或11 则重新生成，构造一个等概率生成器，然后用二进制生成 1-n。



**给你一个硬币，你讲如何获得 2/3 的概率**

> 类似问题，如何用一枚硬币扔出有理数的概率？

这枚硬币扔 两次，出现一次情况的概率相等。

- 正反
- 正正
- 反正
- 反反

所以如果出现第4种情况则相当于采样失败，继续实验，如果在1~3种情况中出现1~2的情况则是一个2/3的概率

**如果想扔出无理数概率呢？**

以上的方法只适合有理数概率，因为可以把有理数概率写成分数形式，然后用分母的数字作为样本空间，从中选出分子个数的情况，作为产生 条件。

但是 概率本身是一个无理数，写不成分数的形式怎么办？

算法：

1. 先把$\frac{1}{\pi}$写成二进制小数点的形式，比如0.0101000101111001.. 这必然是一个无限二进制小数，假设其为p
2. 那么开始抛掷这枚硬币，假设不停的抛掷，相当于产生了一个二进制序列。
3. 拿这个数和 $\frac{1}{\pi}$二进制小数做比较，如果该产生0的位置产生了1，则说明q>p，否则，q<p